var widthfinal,heightfinal,frame,fondo,colorpalette,colormarco,colorlinea1,colorlinea2,colorlinea3,a,b,c,d,a2,b2,c3,d4,canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),colorblack=fxrand()>=.5,lienzo=Math.ceil(8*fxrand()),colores=Math.ceil(8*fxrand()),variacion=Math.ceil(45*fxrand()),Wtipo1=3e3,Htipo1=3e3,Wtipo2=2200,Htipo2=3200,Wtipo3=3300,Htipo3=4e3,Wtipo4=3e3,Htipo4=2500,Wtipo5=4e3,Htipo5=2500,Wtipo6=2e3,Htipo6=3200,Wtipo7=3200,Htipo7=3200,Wtipo8=2800,Htipo8=3900;switch(lienzo){case 1:widthfinal=Wtipo1,heightfinal=Htipo1,frame="3000x3000";break;case 2:widthfinal=Wtipo2,heightfinal=Htipo2,frame="2200x3200";break;case 3:widthfinal=Wtipo3,heightfinal=Htipo3,frame="4000x2000";break;case 4:widthfinal=Wtipo4,heightfinal=Htipo4,frame="3000x2500";break;case 5:widthfinal=Wtipo5,heightfinal=Htipo5,frame="4000x2500";break;case 6:widthfinal=Wtipo6,heightfinal=Htipo6,frame="2000x3200";break;case 7:widthfinal=Wtipo7,heightfinal=Htipo7,frame="3200x3200";break;case 8:widthfinal=Wtipo7,heightfinal=Htipo7,frame="2800x3800"}switch(colores){case 1:fondo="#fff3e6",colormarco="#dbccbd",colorpalette="Cremsa";break;case 2:fondo="#f2f2f2",colormarco="#c2c2d6",colorpalette="Ahumado";break;case 3:fondo="#f2d9e6",colormarco="#f2f2f2",colorpalette="Rosa Empolvado";break;case 4:fondo="#dae6f1",colormarco="#f2f2f2",colorpalette="Bluevanda";break;case 5:fondo="#eaeae1",colormarco="#f2f2f2",colorpalette="Blanco Almendra";break;case 6:fondo="#ebd9c7",colormarco="#f2f2f2",colorpalette="Crema Antigua";break;case 7:fondo="#f2d9d9",colormarco="#f2f2f2",colorpalette="Rosa Palido";break;case 8:fondo="#e0d9d2",colormarco="#f2f2f2",colorpalette="Beige Piedra"}switch(variacion){case 1:a=-3.3945369590073824,b=5.703255023807287,c=5.509644636884332,d=-.6446417029947042,a2=-3.9776894859969616,b2=1.0772764049470425,c2=2.4627588279545307,d2=-3.0438095685094595;break;case 2:a=6.956273812800646,b=-4.234519857913256,c=-2.2378299701958895,d=.9258094932883978,a2=3.241231626830995,b2=-3.0497122295200825,c2=-1.0121540622785687,d2=3.444635158404708;break;case 3:a=-6.122596770524979,b=2.81358371861279,c=4.3120341915637255,d=-3.41955797560513,a2=1.893456494435668,b2=-3.7397420359775424,c2=-3.0485851131379604,d2=3.9080379297956824;break;case 4:a=5.0234625823795795,b=-2.6493370439857244,c=-4.24983268789947,d=4.194198850542307,a2=-3.5385189475491643,b2=2.386416641995311,c2=2.874654765240848,d2=-2.2722965627908707;break;case 5:a=2.2566799949854612,b=-1.541072502732277,c=-3.327261932194233,d=2.3267603907734156,a2=-3.6389670856297016,b2=2.1287589613348246,c2=2.5730990124866366,d2=-3.316143684089184;break;case 6:a=1.0723060313612223,b=-3.0918463300913572,c=-3.6671024281531572,d=-.23173057846724987,a2=2.9113953951746225,b2=-2.613742120563984,c2=-1.142150585539639,d2=3.7599906623363495;break;case 7:a=2.0472734849900007,b=-4.686057375743985,c=-3.58660283498466,d=6.674010312184691,a2=-1.823734449222684,b2=3.042045760899782,c2=2.273739662952721,d2=-2.4136962527409196;break;case 8:a=-6.846318241208792,b=3.8494362253695726,c=4.5230716075748205,d=-6.2786115277558565,a2=-2.1135831363499165,b2=3.4720371356233954,c2=1.6459009051322937,d2=-3.8281239150092006;break;case 9:a=2.8608946177557932,b=4.8745624929555404,c=-2.784757463439883,d=-3.1586209384318606,a2=-1.792659208889621,b2=-2.8118909064147526,c2=-2.323355308950362,d2=3.0492417542239014;break;case 10:a=1.9815901760011911,b=4.874451281502843,c=2.8418647907674313,d=1.1325067169964314,a2=1.7928263815119863,b2=3.4928878685459495,c2=.6649985769763589,d2=3.9275181153789163;break;case 11:a=-5.274192437529564,b=2.2915412727743387,c=4.747270220890641,d=-4.4136099349707365,a2=1.1408998956903815,b2=-1.7172168213874102,c2=-3.8878582464531064,d2=3.7695930460467935;break;case 12:a=-6.454390665516257,b=6.7454721219837666,c=6.773304682224989,d=-1.4413315430283546,a2=2.975755770690739,b2=-2.504415960982442,c2=-1.3433464961126447,d2=3.2178089348599315;break;case 13:a=3.006872732192278,b=6.561662787571549,c=2.2011073604226112,d=-3.5031920075416565,a2=-3.675163979642093,b2=1.9444682402536273,c2=3.648651217110455,d2=-5.542850562371314;break;case 14:a=5.2096704877913,b=4.4841581508517265,c=-3.6528884563595057,d=6.382491670548916,a2=2.529797283001244,b2=2.8868661047890782,c2=4.984818240161985,d2=4.029074041638523;break;case 15:a=2.3409785106778145,b=.9616365255787969,c=3.3873766595497727,d=3.737941808067262,a2=4.441944089813898,b2=.1985732160244904,c2=2.7059243880328667,d2=-.35382102089695255;break;case 16:a=4.388112595304847,b=4.558504395186901,c=1.6358458772301674,d=2.0793747194111347,a2=.3215286508202553,b2=1.848461963236332,c2=.04638114292174578,d2=1.9281911863945425;break;case 17:a=2.695606989786029,b=2.907541749998927,c=2.808423859067261,d=3.099039657972753,a2=-3.3879024758934975,b2=5.086067667230964,c2=3.3669640347361565,d2=-2.5316754207015038;break;case 18:a=-1.1984733454883099,b=-3.950623062904924,c=-3.2792312749661505,d=1.6967773451469839,a2=-1.6827034521847963,b2=.02945579681545496,c2=3.0747268311679363,d2=-2.0311994394287467;break;case 19:a=-2.5190194994211197,b=6.1209522392600775,c=3.4067236930131912,d=-3.8942973744124174,a2=2.3410949110984802,b2=-1.4828596524894238,c2=-2.1893784534186125,d2=2.8594813076779246;break;case 20:a=5.831068867817521,b=-6.6999475955963135,c=-6.25456390157342,d=4.861887065693736,a2=-1.8530964041128755,b2=3.398769650608301,c2=3.063888947479427,d2=-1.9395676366984844;break;case 21:a=3.9833206459879875,b=-2.73854061961174,c=-2.519346361979842,d=3.9110485203564167,a2=-2.524828813970089,b2=2.884191695600748,c2=3.4546447694301605,d2=-2.092394101433456;break;case 22:a=5.060446361079812,b=-5.254476621747017,c=-2.2614771053195,d=4.98062551766634,a2=-1.8565305527299643,b2=.7346366243436933,c2=2.927429374307394,d2=-1.8846579594537616;break;case 23:a=2.0439003743231297,b=-3.69310743175447,c=-3.84930769354105,d=5.628158535808325,a2=-2.6359881591051817,b2=.5959538603201509,c2=.9205739693716168,d2=-1.4927368490025401;break;case 24:a=2.1068492587655783,b=-4.5911776423454285,c=-.022009197622537613,d=5.643966291099787,a2=-3.6463320115581155,b2=2.3101540291681886,c2=2.9853373616933823,d2=-2.336104301735759;break;case 25:a=4.471443297341466,b=-6.166997995227575,c=-.77544304728508,d=4.262026056647301,a2=-3.2775833941996098,b2=.6431357664987445,c2=2.993707999587059,d2=-2.7641036566346884;break;case 26:a=-2.570522103458643,b=-.3052989561110735,c=1.4360772613435984,d=-3.224007058888674,a2=-2.9099996397271752,b2=2.3614062825217843,c2=3.4874961031600833,d2=-.4940330181270838;break;case 27:a=3.7235174980014563,b=-2.4567757826298475,c=-2.5643130391836166,d=3.508124515414238,a2=3.2479037940502167,b2=-3.7999310698360205,c2=-.22476347256451845,d2=2.8331179013475776;break;case 28:a=6.518822588026524,b=-3.4089116007089615,c=-.4105728007853031,d=6.388030976057053,a2=.903637477196753,b2=-2.805284862406552,c2=-1.0511168139055371,d2=2.861894494853914;break;case 29:a=-6.226644387468696,b=6.65453633107245,c=5.432789487764239,d=-5.380047483369708,a2=-3.569497092626989,b2=2.056981734931469,c2=3.388780296780169,d2=-.43048608489334583;break;case 30:a=.917500177398324,b=-5.428734669461846,c=-5.964417228475213,d=6.835209036245942,a2=1.7715954268351197,b2=-3.5526517434045672,c2=-.11806307919323444,d2=3.540590618737042;break;case 31:a=4.073866846039891,b=-4.503329832106829,c=-6.665331449359655,d=1.9606617223471403,a2=-2.5379956448450685,b2=.9176251087337732,c2=.997941673733294,d2=-1.6100732246413827;break;case 32:a=-4.578053917735815,b=-.4662592839449644,c=4.175362577661872,d=-1.5732414480298758,a2=-3.6755718886852264,b2=.8028471441939473,c2=3.7115879775956273,d2=-1.8823323985561728;break;case 33:a=-.17090441659092903,b=3.189599446952343,c=-.4246069584041834,d=-4.740109216421843,a2=-3.5705238822847605,b2=.6251910896971822,c2=2.056040725670755,d2=-1.0391166238114238;break;case 34:a=6.939325636252761,b=-3.341207478195429,c=-2.903836326673627,d=2.9335490856319666,a2=-1.5511432373896241,b2=1.5886122779920697,c2=3.9765561148524284,d2=-1.0895001040771604;break;case 35:a=-3.1157018709927797,b=4.924912026152015,c=3.07121798209846,d=-1.2046765368431807,a2=.4137836592271924,b2=-3.4770551966503263,c2=-3.905264279805124,d2=3.8325633108615875;break;case 36:a=.51266910135746,b=3.5189815536141396,c=.30045137740671635,d=-4.922424331307411,a2=1.5618163757026196,b2=-1.0338419191539288,c2=-2.8554016584530473,d2=.004011833108961582;break;case 37:a=-3.5422596614807844,b=2.410782655701041,c=3.042073857039213,d=-3.636098526418209,a2=-2.138317954726517,b2=.9675785265862942,c2=3.009515610523522,d2=-.2666879380121827;break;case 38:a=2.074574012309313,b=-6.420742720365524,c=-5.002553263679147,d=-.9529146272689104,a2=-3.255406703799963,b2=3.3073919620364904,c2=2.193079376593232,d2=-3.993551665917039;break;case 39:a=2.4326151870191097,b=-4.298371393233538,c=-1.4907597601413727,d=5.387615280225873,a2=-2.7406967282295227,b2=.8513027224689722,c2=2.4888219721615314,d2=-1.1887079840525985;break;case 40:a=-1.3186777718365192,b=2.6381243132054806,c=-2.2464443761855364,d=-6.273856062442064,a2=-3.7355965059250593,b2=2.1215220568701625,c2=3.0072563411667943,d2=-3.5847155721858144;break;case 41:a=-5.798514720052481,b=-.06190770864486694,c=2.498803425580263,d=-1.867412293329835,a2=1.4064794862642884,b2=-3.9531283769756556,c2=-2.605104962363839,d2=.31074636057019234;break;case 42:a=-4.996961168944836,b=4.732895530760288,c=3.855968039482832,d=-4.467077575623989,a2=1.2432107981294394,b2=-3.5381083907559514,c2=-2.2235405100509524,d2=2.72382674831897;break;case 43:a=5.907209819182754,b=-5.9249117858707905,c=.5980092994868755,d=4.007597174495459,a2=3.1142343627288938,b2=-3.6719354819506407,c2=-2.6583631886169314,d2=3.43975577224046;break;case 44:a=1.24945960752666,b=-5.244329929351807,c=-2.0064998157322407,d=1.767258482053876,a2=-2.6584812235087156,b2=.3005222165957093,c2=3.1478670639917254,d2=-1.5458280146121979;break;case 45:a=-3.8448071498423815,b=5.378231735900044,c=3.930313663557172,d=-5.5755764450877905,a2=1.0091832783073187,b2=-1.9958262098953128,c2=-2.7214720407500863,d2=2.572093963623047}colorblack?(colorlinea1="#33001a",colorlinea3="#262626"):(colorlinea1="#262626",colorlinea3="#33001a"),canvas.width=widthfinal,canvas.height=heightfinal;var width=canvas.width,height=canvas.height;function lineas(e,t){console.log(a,b,c,d);for(var o=[],i=0;i<height;i+=5)o.push({x:width/2,y:i,vx:2,vy:2});var r=Date.now();function n(e,t){e=.001*(e-width),t=.001*(t-height);var o=Math.sin(a*t)+c*Math.cos(a*e),i=Math.sin(b*e)+d*Math.cos(b*t);return Math.atan2(i-t,o-e)}!function a(){if(!(Date.now()-r>t)){for(var c=0;c<o.length;c++){var i=o[c],d=n(i.x,i.y);i.vx+=.5*Math.cos(d),i.vy+=.5*Math.sin(d),ctx.beginPath(),ctx.lineWidth=.5,ctx.strokeStyle=e,ctx.moveTo(i.x,i.y),i.x+=i.vx,i.y+=i.vy,ctx.lineTo(i.x,i.y),ctx.stroke(),i.vx*=.99,i.vy*=.99,i.x>width&&(i.x=0),i.y>height&&(i.y=0),i.x<0&&(i.x=width),i.y<0&&(i.y=height)}requestAnimationFrame(a)}}()}function lineas3(a,e){console.log(a2,b2,c2,d2);for(var c=[],t=0;t<height;t+=5)c.push({x:width-300,y:t,vx:2,vy:2});var o=Date.now();function i(a,e){var c=9e-4;a=(a-width)*c,e=(e-height)*c;var t=Math.sin(a2*e)+c2*Math.cos(a2*a),o=Math.sin(b2*a)+d2*Math.cos(b2*e);return Math.atan2(o-e,t-a)}!function t(){if(!(Date.now()-o>e)){for(var r=0;r<c.length;r++){var d=c[r],b=i(d.x,d.y);d.vx+=.5*Math.cos(b),d.vy+=.5*Math.sin(b),ctx.beginPath(),ctx.lineWidth=.5,ctx.strokeStyle=a,ctx.moveTo(d.x,d.y),d.x+=d.vx,d.y+=d.vy,ctx.lineTo(d.x,d.y),ctx.stroke(),d.vx*=.99,d.vy*=.99,d.x>width&&(d.x=0),d.y>height&&(d.y=0),d.x<0&&(d.x=width),d.y<0&&(d.y=height)}requestAnimationFrame(t)}}()}function patron(){const a=ctx.createPattern(createPaperTexture(),"repeat");ctx.fillStyle=a,ctx.globalAlpha=.1,ctx.fillRect(0,0,canvas.width,canvas.height)}function createPaperTexture(){const a=document.createElement("canvas");a.width=40,a.height=40;const e=a.getContext("2d");e.fillStyle="black",e.fillRect(0,0,a.width,a.height),e.fillStyle="#e6ccb3";for(let c=0;c<50;c++){const c=fxrand()*a.width,t=fxrand()*a.height;e.fillRect(c,t,5,5)}return a}function marcoGray(){ctx.beginPath(),ctx.shadowOffsetX=0,ctx.shadowOffsetY=0,ctx.shadowBlur=50,ctx.globalAlpha=1,ctx.strokeStyle=colormarco,ctx.lineWidth=100,ctx.shadowBlur=0,ctx.moveTo(0,0),ctx.lineTo(0,height),ctx.lineTo(width,height),ctx.lineTo(width,0),ctx.lineTo(0,0),ctx.stroke()}$fx.features({"Canvas Size":frame,"Background Color":colorpalette,"Pathway Variation":"Type "+variacion}),ctx.fillStyle=fondo,ctx.fillRect(0,0,width,height),lineas(colorlinea1,3e4),lineas3(colorlinea3,3e4),marcoGray(),createPaperTexture(),patron();var download=function(){var a=document.createElement("a");a.download="Monad-1960.png",a.href=document.getElementById("canvas").toDataURL(),a.click()};document.addEventListener("keydown",(a=>{a.key,"KeyS"===a.code&&this.download()}),!1),fxpreview();